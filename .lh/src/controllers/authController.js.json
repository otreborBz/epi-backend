{
    "sourceFile": "src/controllers/authController.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1759693762039,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1761263907465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,59 +1,61 @@\n-const axios = require('axios');\n-\n-const login = async (req, res) => {\n-  const { email, password } = req.body;\n-\n-  if (!email || !password) {\n-    return res.status(400).json({ error: 'Email e senha são obrigatórios.' });\n-  }\n-\n-  const apiKey = process.env.FIREBASE_WEB_API_KEY;\n-  if (!apiKey) {\n-    console.error('A variável de ambiente FIREBASE_WEB_API_KEY não está definida.');\n-    return res.status(500).json({ error: 'Erro de configuração no servidor.' });\n-  }\n-\n-  const firebaseAuthUrl = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${apiKey}`;\n-\n-  try {\n-    const response = await axios.post(firebaseAuthUrl, {\n-      email,\n-      password,\n-      returnSecureToken: true,\n-    });\n-    return res.status(200).json(response.data);\n-  } catch (error) {\n-    const errorMessage = error.response?.data?.error?.message || 'Erro de autenticação.';\n-    return res.status(401).json({ error: errorMessage });\n-  }\n-};\n-\n-const register = async (req, res) => {\n-  const { email, password } = req.body;\n-\n-  if (!email || !password) {\n-    return res.status(400).json({ error: 'Email e senha são obrigatórios.' });\n-  }\n-\n-  const apiKey = process.env.FIREBASE_WEB_API_KEY;\n-  if (!apiKey) {\n-    console.error('A variável de ambiente FIREBASE_WEB_API_KEY não está definida.');\n-    return res.status(500).json({ error: 'Erro de configuração no servidor.' });\n-  }\n-\n-  const firebaseAuthUrl = `https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${apiKey}`;\n-\n-  try {\n-    const response = await axios.post(firebaseAuthUrl, {\n-      email,\n-      password,\n-      returnSecureToken: true,\n-    });\n-    return res.status(201).json(response.data);\n-  } catch (error) {\n-    const errorMessage = error.response?.data?.error?.message || 'Erro ao registrar usuário.';\n-    return res.status(400).json({ error: errorMessage });\n-  }\n-};\n-\n+const axios = require('axios');\r\n+\r\n+const login = async (req, res) => {\r\n+  const { email, password } = req.body;\r\n+\r\n+  if (!email || !password) {\r\n+    return res.status(400).json({ error: 'Email e senha são obrigatórios.' });\r\n+  }\r\n+\r\n+  \r\n+\r\n+  const apiKey = process.env.FIREBASE_WEB_API_KEY;\r\n+  if (!apiKey) {\r\n+    console.error('A variável de ambiente FIREBASE_WEB_API_KEY não está definida.');\r\n+    return res.status(500).json({ error: 'Erro de configuração no servidor.' });\r\n+  }\r\n+\r\n+  const firebaseAuthUrl = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${apiKey}`;\r\n+\r\n+  try {\r\n+    const response = await axios.post(firebaseAuthUrl, {\r\n+      email,\r\n+      password,\r\n+      returnSecureToken: true,\r\n+    });\r\n+    return res.status(200).json(response.data);\r\n+  } catch (error) {\r\n+    const errorMessage = error.response?.data?.error?.message || 'Erro de autenticação.';\r\n+    return res.status(401).json({ error: errorMessage });\r\n+  }\r\n+};\r\n+\r\n+const register = async (req, res) => {\r\n+  const { email, password } = req.body;\r\n+\r\n+  if (!email || !password) {\r\n+    return res.status(400).json({ error: 'Email e senha são obrigatórios.' });\r\n+  }\r\n+\r\n+  const apiKey = process.env.FIREBASE_WEB_API_KEY;\r\n+  if (!apiKey) {\r\n+    console.error('A variável de ambiente FIREBASE_WEB_API_KEY não está definida.');\r\n+    return res.status(500).json({ error: 'Erro de configuração no servidor.' });\r\n+  }\r\n+\r\n+  const firebaseAuthUrl = `https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${apiKey}`;\r\n+\r\n+  try {\r\n+    const response = await axios.post(firebaseAuthUrl, {\r\n+      email,\r\n+      password,\r\n+      returnSecureToken: true,\r\n+    });\r\n+    return res.status(201).json(response.data);\r\n+  } catch (error) {\r\n+    const errorMessage = error.response?.data?.error?.message || 'Erro ao registrar usuário.';\r\n+    return res.status(400).json({ error: errorMessage });\r\n+  }\r\n+};\r\n+\r\n module.exports = { login, register };\n\\ No newline at end of file\n"
                },
                {
                    "date": 1761263912710,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,61 @@\n+const axios = require('axios');\r\n+\r\n+const login = async (req, res) => {\r\n+  const { email, password } = req.body;\r\n+\r\n+  if (!email || !password) {\r\n+    return res.status(400).json({ error: 'Email e senha são obrigatórios.' });\r\n+  }\r\n+\r\n+  console.log\r\n+\r\n+  const apiKey = process.env.FIREBASE_WEB_API_KEY;\r\n+  if (!apiKey) {\r\n+    console.error('A variável de ambiente FIREBASE_WEB_API_KEY não está definida.');\r\n+    return res.status(500).json({ error: 'Erro de configuração no servidor.' });\r\n+  }\r\n+\r\n+  const firebaseAuthUrl = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${apiKey}`;\r\n+\r\n+  try {\r\n+    const response = await axios.post(firebaseAuthUrl, {\r\n+      email,\r\n+      password,\r\n+      returnSecureToken: true,\r\n+    });\r\n+    return res.status(200).json(response.data);\r\n+  } catch (error) {\r\n+    const errorMessage = error.response?.data?.error?.message || 'Erro de autenticação.';\r\n+    return res.status(401).json({ error: errorMessage });\r\n+  }\r\n+};\r\n+\r\n+const register = async (req, res) => {\r\n+  const { email, password } = req.body;\r\n+\r\n+  if (!email || !password) {\r\n+    return res.status(400).json({ error: 'Email e senha são obrigatórios.' });\r\n+  }\r\n+\r\n+  const apiKey = process.env.FIREBASE_WEB_API_KEY;\r\n+  if (!apiKey) {\r\n+    console.error('A variável de ambiente FIREBASE_WEB_API_KEY não está definida.');\r\n+    return res.status(500).json({ error: 'Erro de configuração no servidor.' });\r\n+  }\r\n+\r\n+  const firebaseAuthUrl = `https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${apiKey}`;\r\n+\r\n+  try {\r\n+    const response = await axios.post(firebaseAuthUrl, {\r\n+      email,\r\n+      password,\r\n+      returnSecureToken: true,\r\n+    });\r\n+    return res.status(201).json(response.data);\r\n+  } catch (error) {\r\n+    const errorMessage = error.response?.data?.error?.message || 'Erro ao registrar usuário.';\r\n+    return res.status(400).json({ error: errorMessage });\r\n+  }\r\n+};\r\n+\r\n+module.exports = { login, register };\n\\ No newline at end of file\n"
                },
                {
                    "date": 1761263920487,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,61 @@\n+const axios = require('axios');\r\n+\r\n+const login = async (req, res) => {\r\n+  const { email, password } = req.body;\r\n+\r\n+  if (!email || !password) {\r\n+    return res.status(400).json({ error: 'Email e senha são obrigatórios.' });\r\n+  }\r\n+\r\n+  console.log(email)\r\n+\r\n+  const apiKey = process.env.FIREBASE_WEB_API_KEY;\r\n+  if (!apiKey) {\r\n+    console.error('A variável de ambiente FIREBASE_WEB_API_KEY não está definida.');\r\n+    return res.status(500).json({ error: 'Erro de configuração no servidor.' });\r\n+  }\r\n+\r\n+  const firebaseAuthUrl = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${apiKey}`;\r\n+\r\n+  try {\r\n+    const response = await axios.post(firebaseAuthUrl, {\r\n+      email,\r\n+      password,\r\n+      returnSecureToken: true,\r\n+    });\r\n+    return res.status(200).json(response.data);\r\n+  } catch (error) {\r\n+    const errorMessage = error.response?.data?.error?.message || 'Erro de autenticação.';\r\n+    return res.status(401).json({ error: errorMessage });\r\n+  }\r\n+};\r\n+\r\n+const register = async (req, res) => {\r\n+  const { email, password } = req.body;\r\n+\r\n+  if (!email || !password) {\r\n+    return res.status(400).json({ error: 'Email e senha são obrigatórios.' });\r\n+  }\r\n+\r\n+  const apiKey = process.env.FIREBASE_WEB_API_KEY;\r\n+  if (!apiKey) {\r\n+    console.error('A variável de ambiente FIREBASE_WEB_API_KEY não está definida.');\r\n+    return res.status(500).json({ error: 'Erro de configuração no servidor.' });\r\n+  }\r\n+\r\n+  const firebaseAuthUrl = `https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${apiKey}`;\r\n+\r\n+  try {\r\n+    const response = await axios.post(firebaseAuthUrl, {\r\n+      email,\r\n+      password,\r\n+      returnSecureToken: true,\r\n+    });\r\n+    return res.status(201).json(response.data);\r\n+  } catch (error) {\r\n+    const errorMessage = error.response?.data?.error?.message || 'Erro ao registrar usuário.';\r\n+    return res.status(400).json({ error: errorMessage });\r\n+  }\r\n+};\r\n+\r\n+module.exports = { login, register };\n\\ No newline at end of file\n"
                },
                {
                    "date": 1761263985720,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,8 @@\n     return res.status(400).json({ error: 'Email e senha são obrigatórios.' });\r\n   }\r\n \r\n  \r\n-\r\n   const apiKey = process.env.FIREBASE_WEB_API_KEY;\r\n   if (!apiKey) {\r\n     console.error('A variável de ambiente FIREBASE_WEB_API_KEY não está definida.');\r\n     return res.status(500).json({ error: 'Erro de configuração no servidor.' });\r\n"
                },
                {
                    "date": 1761264145129,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,59 +1,36 @@\n const axios = require('axios');\r\n \r\n const login = async (req, res) => {\r\n   const { email, password } = req.body;\r\n-const apiKey = process.env.FIREBASE_WEB_API_KEY;\r\n-const authBaseUrl = 'https://identitytoolkit.googleapis.com/v1/accounts';\r\n \r\n   if (!email || !password) {\r\n     return res.status(400).json({ error: 'Email e senha são obrigatórios.' });\r\n   }\r\n \r\n   const apiKey = process.env.FIREBASE_WEB_API_KEY;\r\n-const firebaseAuthRequest = async (endpoint, email, password) => {\r\n   if (!apiKey) {\r\n     console.error('A variável de ambiente FIREBASE_WEB_API_KEY não está definida.');\r\n     return res.status(500).json({ error: 'Erro de configuração no servidor.' });\r\n-    throw new Error('A variável de ambiente FIREBASE_WEB_API_KEY não está definida.');\r\n   }\r\n-  const url = `${authBaseUrl}:${endpoint}?key=${apiKey}`;\r\n-  return axios.post(url, { email, password, returnSecureToken: true });\r\n-};\r\n \r\n   const firebaseAuthUrl = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${apiKey}`;\r\n-const login = async (req, res) => {\r\n-  try {\r\n-    const { email, password } = req.body;\r\n-    if (!email || !password) {\r\n-      return res.status(400).json({ error: 'Email e senha são obrigatórios.' });\r\n-    }\r\n \r\n   try {\r\n     const response = await axios.post(firebaseAuthUrl, {\r\n       email,\r\n       password,\r\n       returnSecureToken: true,\r\n     });\r\n-    const response = await firebaseAuthRequest('signInWithPassword', email, password);\r\n     return res.status(200).json(response.data);\r\n   } catch (error) {\r\n-    if (!apiKey) {\r\n-      console.error(error.message);\r\n-      return res.status(500).json({ error: 'Erro de configuração no servidor.' });\r\n-    }\r\n     const errorMessage = error.response?.data?.error?.message || 'Erro de autenticação.';\r\n     return res.status(401).json({ error: errorMessage });\r\n   }\r\n };\r\n \r\n const register = async (req, res) => {\r\n   const { email, password } = req.body;\r\n-  try {\r\n-    const { email, password } = req.body;\r\n-    if (!email || !password) {\r\n-      return res.status(400).json({ error: 'Email e senha são obrigatórios.' });\r\n-    }\r\n \r\n   if (!email || !password) {\r\n     return res.status(400).json({ error: 'Email e senha são obrigatórios.' });\r\n   }\r\n@@ -71,15 +48,10 @@\n       email,\r\n       password,\r\n       returnSecureToken: true,\r\n     });\r\n-    const response = await firebaseAuthRequest('signUp', email, password);\r\n     return res.status(201).json(response.data);\r\n   } catch (error) {\r\n-    if (!apiKey) {\r\n-      console.error(error.message);\r\n-      return res.status(500).json({ error: 'Erro de configuração no servidor.' });\r\n-    }\r\n     const errorMessage = error.response?.data?.error?.message || 'Erro ao registrar usuário.';\r\n     return res.status(400).json({ error: errorMessage });\r\n   }\r\n };\r\n"
                }
            ],
            "date": 1759693762039,
            "name": "Commit-0",
            "content": "const axios = require('axios');\n\nconst login = async (req, res) => {\n  const { email, password } = req.body;\n\n  if (!email || !password) {\n    return res.status(400).json({ error: 'Email e senha são obrigatórios.' });\n  }\n\n  const apiKey = process.env.FIREBASE_WEB_API_KEY;\n  if (!apiKey) {\n    console.error('A variável de ambiente FIREBASE_WEB_API_KEY não está definida.');\n    return res.status(500).json({ error: 'Erro de configuração no servidor.' });\n  }\n\n  const firebaseAuthUrl = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${apiKey}`;\n\n  try {\n    const response = await axios.post(firebaseAuthUrl, {\n      email,\n      password,\n      returnSecureToken: true,\n    });\n    return res.status(200).json(response.data);\n  } catch (error) {\n    const errorMessage = error.response?.data?.error?.message || 'Erro de autenticação.';\n    return res.status(401).json({ error: errorMessage });\n  }\n};\n\nconst register = async (req, res) => {\n  const { email, password } = req.body;\n\n  if (!email || !password) {\n    return res.status(400).json({ error: 'Email e senha são obrigatórios.' });\n  }\n\n  const apiKey = process.env.FIREBASE_WEB_API_KEY;\n  if (!apiKey) {\n    console.error('A variável de ambiente FIREBASE_WEB_API_KEY não está definida.');\n    return res.status(500).json({ error: 'Erro de configuração no servidor.' });\n  }\n\n  const firebaseAuthUrl = `https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${apiKey}`;\n\n  try {\n    const response = await axios.post(firebaseAuthUrl, {\n      email,\n      password,\n      returnSecureToken: true,\n    });\n    return res.status(201).json(response.data);\n  } catch (error) {\n    const errorMessage = error.response?.data?.error?.message || 'Erro ao registrar usuário.';\n    return res.status(400).json({ error: errorMessage });\n  }\n};\n\nmodule.exports = { login, register };"
        }
    ]
}